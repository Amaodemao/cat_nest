import{_ as c,r as o,j as t,a as L}from"./index-BAogE4eO.js";const m=(r,n)=>Object.keys(r).map(s=>{const a=s.split("/").pop()??s;return{src:`${n}/${a}`,title:N(a)}}).sort((s,a)=>s.title.localeCompare(a.title,void 0,{numeric:!0})),N=r=>r.replace(/\.[^/.]+$/,"").replace(/[-_]+/g," "),O=Object.assign({"../../public/img/gallery/Ready2Go!.jpg":()=>c(()=>import("./Ready2Go!-BRvUAaEm.js"),[]),"../../public/img/gallery/沙漠使者.png":()=>c(()=>import("./沙漠使者-BO-JF5TQ.js"),[]),"../../public/img/gallery/疾风.jpg":()=>c(()=>import("./疾风-D-_RbM_x.js"),[]),"../../public/img/gallery/真拿你没办法.png":()=>c(()=>import("./真拿你没办法-BAKUoq0W.js"),[])}),R=Object.assign({"../../public/img/gallery/NSFW/早上起床来一发.png":()=>c(()=>import("./早上起床来一发-DzS_2j5F.js"),[])}),S=Object.assign({"../../public/img/gallery/NSFW/gore/屠宰.jpg":()=>c(()=>import("./屠宰-Kjb06TwL.js"),[])}),I=m(O,"/img/gallery"),P=m(R,"/img/gallery/NSFW"),k=m(S,"/img/gallery/NSFW/gore");function G(){const[r,n]=o.useState({open:!1,src:"",caption:""}),[s,a]=o.useState(!1),[l,f]=o.useState(!1),[d,p]=o.useState("idle"),_=o.useRef(null),g=o.useRef([]),b=s?l?k:P:I,h=e=>{const i=e.currentTarget;i.naturalWidth<=i.naturalHeight?i.classList.add("portrait"):i.classList.remove("portrait")};o.useEffect(()=>{if(!r.open)return;const e=i=>{i.key==="Escape"&&n(u=>({...u,open:!1}))};return document.addEventListener("keyup",e),()=>document.removeEventListener("keyup",e)},[]),o.useEffect(()=>{!s&&l&&f(!1)},[s,l]);const y=(e,i)=>{if(d!=="idle")return;g.current.forEach(T=>window.clearTimeout(T)),g.current=[],p("out");const u=450,x=900,v=window.setTimeout(()=>{a(e),f(e?i:!1),p("in")},u),w=window.setTimeout(()=>{p("idle")},x);g.current.push(v,w)};o.useEffect(()=>()=>{g.current.forEach(e=>window.clearTimeout(e))},[]);const E=e=>{e.target.id==="lightbox"&&n(u=>({...u,open:!1}))},j=e=>{n({open:!0,src:e.src,caption:e.title??""})};return t.jsxs("section",{id:"gallery",className:"container","aria-labelledby":"gallery-title",children:[t.jsxs("div",{className:"gallery-header",children:[t.jsx("h2",{id:"gallery-title",children:"Gallery"}),t.jsxs("div",{className:"gallery-controls",children:[t.jsx("button",{type:"button",className:`toggle-btn ${s?"is-active":""}`,"aria-pressed":s,onClick:()=>y(!s,l),disabled:d!=="idle",children:"NSFW"}),s&&t.jsx("button",{type:"button",className:`toggle-btn ${l?"is-active":""}`,"aria-pressed":l,onClick:()=>y(s,!l),disabled:d!=="idle",children:"Gore"})]})]}),t.jsx("div",{className:`gallery grid ${d!=="idle"?"is-transitioning":""} is-${d}`,ref:_,children:b.map((e,i)=>t.jsxs("figure",{onClick:()=>j(e),children:[t.jsx("img",{src:e.src,onLoad:h,loading:"lazy"}),t.jsx("figcaption",{children:e.title})]},i))}),typeof document<"u"&&L.createPortal(t.jsx("div",{id:"lightbox",className:r.open?"open":"","aria-hidden":r.open?"false":"true",onClick:E,children:t.jsxs("figure",{children:[r.open&&t.jsx("img",{src:r.src}),t.jsx("figcaption",{children:r.caption})]})}),document.body)]})}export{G as default};
